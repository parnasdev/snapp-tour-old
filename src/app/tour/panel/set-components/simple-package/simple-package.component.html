<div class="box-info-package">
    <div class="info-tour-header">
      <div class="right">
        <h2 class="text-dark">اطلاعات پکیج</h2>
      </div>
      <div class="left">
        <div class="selectdiv me-2">
          <label>
            <select (change)="sortPackages($event)">
              <option value="null">مرتب سازی بر اساس:</option>
              <option [value]="1">ارزان ترین قیمت</option>
              <option [value]="2">ستاره</option>
            </select>
          </label>
        </div>
      </div>
    </div>
    <div class="info-tour-body p-0">
      <!-- <div class="change-price-box">
        <span>تغییر گروهی قیمت ها</span>
        <input type="text">
      </div> -->
      <div class="change-price-box" *ngIf="form.value.defineTour == 'false' && !tourType">
        <span>نرخ پکیج و قیمت پرواز</span>
        <div style="margin-right: 16px" class="d-flex align-items-center w-100 mr-5">
          <select [formControl]="ratePricesFC" (change)="changeRateForPackages($event)">
            <option [value]="3">دلار</option>
            <option [value]="2">یورو</option>
            <option [value]="4">درهم</option>
            <option [value]="1">تومان</option>
          </select>

          <div class="w-50" *ngIf="checkPackageRate()">
            <input (keyup)="setADLRatePrice($event)" formControlName="ADLFlightRate"
                   placeholder="قیمت پرواز بزرگسال به تومان" type="text" mask="separator" thousandSeparator=",">
            <div *ngIf="errorService.hasError('ADLFlightRate')">
              <span class="text-danger">{{errorService.getError('ADLFlightRate')}}</span>
            </div>
            <input (keyup)="setCnbRatePrice($event)" formControlName="CHDFlightRate"
                   placeholder="قیمت پرواز کودک به تومان" type="text" mask="separator" thousandSeparator=",">
            <div *ngIf="errorService.hasError('CHDFlightRate')">
              <span class="text-danger">{{errorService.getError('CHDFlightRate')}}</span>
            </div>
          </div>
        </div>
      </div>
      <!--            local tour-->
      <div class="w-100 d-flex flex-column mobile-package">
        <div class="header-box" *ngIf="tourType">
          <div class="package-item">#</div>
          <div class="package-item">نام هتل</div>
          <div class="package-item">خدمات</div>
          <div class="package-item">
            دو تخته(هرنفر)
            <br>
            ظرفیت
          </div>
          <div class="package-item">
            سه تخته(هرنفر)
            <br>
            ظرفیت
          </div>
          <div class="package-item">
            چهار تخته(هرنفر)
            <br>
            ظرفیت
          </div>
          <div class="package-item">سن کودک</div>
          <div class="package-item" *ngIf="form.value.defineTour == 'true'">نرخ بزرگسال</div>
          <div class="package-item">آفر ویژه</div>
          <div></div>
        </div>
        <!--            foreign tour-->
        <div class="header-box-two" *ngIf="!tourType">
          <div class="package-item">#</div>
          <div class="package-item">نام هتل</div>
          <div class="package-item">{{ form.value.defineTour == 'true' ? 'نرخ / خدمات' : 'خدمات'}}</div>
          <div class="package-item">
            دو تخته(هرنفر)
            <br>
            ظرفیت
          </div>
          <div class="package-item">
            یک تخته(هرنفر)
            <br>
            ظرفیت
          </div>
          <div class="package-item">
            کودک با تخت(هرنفر)
            <br>
            ظرفیت
          </div>
          <!-- <div class="package-item">کودک بدون تخت</div> -->
          <div class="package-item">سن کودک</div>
          <div class="package-item" *ngIf="form.value.defineTour == 'true'">نرخ بزرگسال</div>
          <div class="package-item">آفر ویژه</div>
          <div></div>
        </div>
        <form [formGroup]="form" class="example-list" formArrayName="packages" action="" cdkDropList
              (cdkDropListDropped)="drop($event)">
          <div class="body-box example-box" *ngFor="let tour of ToursForm.controls; let i = index" cdkDrag
               [formGroupName]="i">
            <div class="package-item id-package">
              <div class="icon-from-to">
                <i class="icon-up-open"></i>
                <i class="icon-down-open"></i>
              </div>
            </div>
            <div class="package-item">
              <!--              <select name="" id="" formControlName="hotel_id">-->
              <!--                <option *ngFor="let hotel of hotels"-->
              <!--                        [value]="hotel.id">{{tourType ? hotel.name : hotel.nameEn}}</option>-->
              <!--              </select>-->
              <prs-select-hotel [hotels]="hotels" [callHotel]="false" [type]="tourType" [isAdmin]="true"
                                (hotelSelected)="hotelChange($event,i)"></prs-select-hotel>
              <div class="parent-icon under-package d-flex align-items-center">
                <i class="icon-star text-warning" *ngFor="let star of getStars(i)"></i>
              </div>
            </div>
            <div class="package-item">
              <div class="d-flex align-items-center w-100 parent-box-rate">
                <div class="package-item rate-width" *ngIf="form.value.defineTour == 'true' && !tourType">
                  <select (change)="updatePackagePrices()" formControlName="rate">
                    <option *ngIf="form.value.dollarRate" [value]="3">دلار</option>
                    <option *ngIf="form.value.euroRate" [value]="2">یورو</option>
                    <option *ngIf="form.value.AEDRate" [value]="4">درهم</option>
                    <option [value]="1">تومان</option>
                  </select>
                </div>
                <div class="package-item service-width">
                  <select name="" id="" formControlName="services">
                    <option *ngFor="let service of services" [value]="service.id">{{service.name}}</option>
                  </select>
                </div>
              </div>
            </div>

            <!--            local tour-->
            <ng-template class="body-local" [ngIf]="tourType">
              <div class="package-item">
                <input placeholder="قیمت (تومان)" (keyup)="calculatePrice('twin', $event, true, i)" type="text"
                       formControlName="twin"
                       mask="separator" thousandSeparator=",">
                <div class="under-package-text d-flex align-items-center"
                     *ngIf="form.value.defineTour == 'true' && form.get('packages')?.value[i].twin > 0">
                  <p>{{ getData(i).twinRate.value | sperator }}</p>

                </div>
                <input type="text" formControlName="twinCapacity" placeholder="موجودی" mask="separator"
                       thousandSeparator=",">
              </div>
              <div class="package-item">
                <input placeholder="قیمت (تومان)" (keyup)="calculatePrice('triple', $event, true, i)" type="text"
                       formControlName="triple"
                       mask="separator" thousandSeparator=",">
                <div class="under-package-text"
                     *ngIf="form.value.defineTour == 'true' && form.get('packages')?.value[i].triple > 0">
                  <p>{{ getData(i).tripleRate.value | sperator }}</p>
                </div>
                <input type="text" placeholder="موجودی" formControlName="tripleCapacity" mask="separator"
                       thousandSeparator=",">
              </div>
              <div class="package-item">
                <input placeholder="قیمت (تومان)" (keyup)="calculatePrice('quad', $event, true, i)" type="text"
                       formControlName="quad"
                       mask="separator" thousandSeparator=",">
                <div class="under-package-text"
                     *ngIf="form.value.defineTour == 'true' && form.get('packages')?.value[i].quad > 0">
                  <p>{{ getData(i).quadRate.value | sperator }}</p>
                </div>
                <input type="text" placeholder="موجودی" formControlName="quadCapacity" mask="separator"
                       thousandSeparator=",">
              </div>
              <div class="package-item">
                <input type="text" formControlName="age">
              </div>
              <div class="package-item" *ngIf="form.value.defineTour == 'true'">
                <input (keyup)="updatePackagePrices()" type="text" formControlName="ADLRate" mask="separator"
                       thousandSeparator=",">
              </div>
              <div class="package-item d-flex flex-row">
                <input formControlName="offered" class="offer-checkbox" type="checkbox">
                <!-- <input formControlName="pool" class="offer-checkbox" type="checkbox"> -->
              </div>
              <div style="flex-direction: row !important;" class="package-item">
                <i class="icon-trash text-danger" (click)="removePackage(i)"></i>
                <img src="assets/img/FAQ.svg" width="18" class="ms-2" (click)="openRoomPopup(i)">
              </div>
            </ng-template>
            <!--            foreign tour-->
            <ng-template class="body-foreign" [ngIf]="!tourType">
              <div class="package-item">
                <input placeholder="قیمت (تومان)" (keyup)="calculatePrice('twin', $event, true, i)" type="text"
                       formControlName="twin"
                       mask="separator" thousandSeparator=",">
                <div class="under-package-text"
                     *ngIf="form.value.defineTour == 'true' && form.get('packages')?.value[i].twin > 0">
                  <p>{{ getData(i).twinRate.value | sperator }}</p>
                </div>
                <input type="text" formControlName="twinCapacity" mask="separator" placeholder="موجودی"
                       thousandSeparator=",">

              </div>
              <div class="package-item">
                <input placeholder="قیمت (تومان)" (keyup)="calculatePrice('single', $event, true, i)" type="text"
                       formControlName="single"
                       mask="separator" thousandSeparator=",">
                <div class="under-package-text"
                     *ngIf="form.value.defineTour == 'true' && form.get('packages')?.value[i].single > 0">
                  <p>{{ getData(i).singleRate.value | sperator }}</p>
                </div>
                <input type="text" placeholder="موجودی" formControlName="singleCapacity" mask="separator"
                       thousandSeparator=",">

              </div>
              <div class="package-item">
                <input (keyup)="calculatePrice('cwb', $event, false, i)" placeholder="قیمت (تومان)" type="text"
                       formControlName="cwb"
                       mask="separator" thousandSeparator=",">
                <div class="under-package-text"
                     *ngIf="form.value.defineTour == 'true' && form.get('packages')?.value[i].cwb > 0">
                  <p>{{ getData(i).cwbRate.value | sperator }}</p>
                </div>
                <input type="text" placeholder="موجودی" formControlName="cwbCapacity" mask="separator"
                       thousandSeparator=",">

              </div>
              <!-- <div class="package-item">
                <input type="text" formControlName="cnb" mask="separator" thousandSeparator=",">
              </div> -->
              <div class="package-item">
                <input placeholder="سن کودک" type="text" formControlName="age">
              </div>
              <div class="package-item" *ngIf="form.value.defineTour == 'true'">
                <input (keyup)="updatePackagePrices()" type="text" formControlName="ADLRate" mask="separator"
                       thousandSeparator=",">
              </div>
              <div class="package-item d-flex flex-row">
                <input formControlName="offered" class="offer-checkbox" type="checkbox">
                <!-- <input formControlName="pool" class="offer-checkbox" type="checkbox"> -->
              </div>
              <div style="flex-direction: row !important;" class="package-item">
                <i class="icon-trash text-danger" (click)="removePackage(i)"></i>
                <img src="assets/img/FAQ.svg" width="18" (click)="openRoomPopup(i)">
              </div>
            </ng-template>

          </div>
        </form>
      </div>


      <div class="package-item">
        <a (click)="addRow(0)" class="btn-add-tour-fix">
          <i class="icon-plus-squared-alt"></i>
          <span>اضافه</span>
        </a>
      </div>
    </div>

  </div>